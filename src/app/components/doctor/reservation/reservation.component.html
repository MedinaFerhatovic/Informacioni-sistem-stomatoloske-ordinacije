<div class="stats-container">
  <div class="stat-card">
    <i class="fas fa-calendar-alt"></i>
    <p>Ukupno rezervacija: <span>{{ totalReservations }}</span></p>
  </div>
  <div class="stat-card">
    <i class="fas fa-clock"></i>
    <p>Rezervacije na čekanju: <span>{{ pendingReservations }}</span></p>
  </div>
  <div class="stat-card">
    <i class="fas fa-check-circle"></i>
    <p>Prihvaćene rezervacije: <span>{{ acceptedReservations }}</span></p>
  </div>
  <div class="stat-card">
    <i class="fas fa-times-circle"></i>
    <p>Odbijene rezervacije: <span>{{ rejectedReservations }}</span></p>
  </div>
</div>

<hr/>

<div *ngIf="reservations.length > 0; else noReservations">
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Datum rezervacije</th>
        <th>Ime i prezime</th>
        <th>Email</th>
        <th>Broj telefona</th>
        <th>Godine pacijenta</th>
        <th>Opis</th>
        <th>Datum termina</th>
        <th>Vrijeme termina</th>
        <th>Status</th>
        <th>Opcije</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let reservation of reservations" class="reservation-row">
        <td>{{ reservation.reservationDate | date: 'dd.MM.yyyy' }}</td>
        <td>{{ reservation.user.firstName }} {{ reservation.user.lastName }}</td>
        <td>{{ reservation.user.email }}</td>
        <td>{{ reservation.phoneNumber }}</td>
        <td>{{ reservation.age }}</td>
        <td>{{ reservation.description }}</td>
        <td>{{ reservation.appointment.date | date: 'dd.MM.yyyy' }}</td>
        <td>{{ formatTime(reservation.appointment.startTime) }} - {{ formatTime(reservation.appointment.endTime) }}</td>

        <td class="status-cell">
          <span [ngClass]="{
            'status-pending': reservation.status === 'na cekanju',
            'status-approved': reservation.status === 'odobrena',
            'status-rejected': reservation.status === 'odbijena'
          }">{{ reservation.status === 'na cekanju' ? 'Na čekanju' : (reservation.status | titlecase) }}
          </span>
        </td>
        <td>
          <button *ngIf="reservation.status === 'na cekanju'" class="btn approve-btn" (click)="updateStatus(reservation.reservationId, 'odobrena')">
            <i class="fas fa-check icon"></i> Odobri
          </button>
          <button *ngIf="reservation.status === 'na cekanju'" class="btn reject-btn" (click)="updateStatus(reservation.reservationId, 'odbijena')">
            <i class="fas fa-times icon"></i> Odbij
          </button>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<ng-template #noReservations>
  <div class="no-reservations">
    <p><i class="fas fa-info-circle"></i> Trenutno nema rezervacija za prikaz.</p>
  </div>
</ng-template>
